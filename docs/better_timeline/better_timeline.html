<!DOCTYPE HTML>
<html lang="de">

<head>
  <title>Timeline | Basic demo</title>
  <meta charset="utf-8" />
  <style type="text/css">
    body,
    html {
      font-family: sans-serif;
    }
  </style>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.20.1/vis.js"></script>
  <script src="jquery-3.2.1.min.js"></script>
  <script src="myjs.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.20.1/vis.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <h1>Camera 2016 </h1>
  <div id="visualization"></div>
  <h2> Ausge√§hltes Interval </h2>
  <div id="disp_selected">Please select an interval.</div>

  <script type="text/javascript">
    // DOM element where the Timeline will be attached
    $.ajaxSetup({
      async: false
    });

    var JSON_PATH0 = 'Cam_0_intervals_ecc.json';
    var JSON_PATH1 = 'Cam_1_intervals_ecc.json';
    var JSON_PATH2 = 'Cam_2_intervals_ecc.json';
    var JSON_PATH3 = 'Cam_3_intervals_ecc.json';

    var PATHS = [JSON_PATH0, JSON_PATH1, JSON_PATH2, JSON_PATH3]

    var dsply_json = [];
    PATHS.forEach(function(json_path, cam_id){
      var curJson;
      $.getJSON(json_path, function(json) {
        curJson = json
      });
      curJson.forEach(function(item, j){
        dsply_json.push(createSafeInterval(item, dsply_json.length, cam_id))
        if (item["end_unsafe_video_name"] !== null)
          dsply_json.push(createUnsafeInterval(item, dsply_json.length, cam_id))
      })
    })
    var groups = new vis.DataSet();
    groups.add([
      {
          "id": "ecc_intervals",
          "content": 'Ecc Intervals',
          "nestedGroups": [0,1,2,3]
      },
      {
        "id": 0,
        "content": 'Cam_0',
      },
      {
        "id": 1,
        "content": 'Cam_1'
        // Optional: a field 'className', 'style', 'order', [properties]
      },
      {
        "id": 2,
        "content": 'Cam_2'
        // Optional: a field 'className', 'style', 'order', [properties]
      },
      {
        "id": 3,
        "content": 'Cam_3'
        // Optional: a field 'className', 'style', 'order', [properties]
      }
    ]);
    // groups.add(groups_data)
    var options = {
      "stack": false
    };

    var container = document.getElementById('visualization');
    var items = new vis.DataSet(dsply_json);
    var timeline = new vis.Timeline(container, items, groups, options);
    timeline.on('select', function (properties) {
        var item1 = items.get(properties.items);
        var curr_container = document.getElementById('disp_selected')
        curr_container.innerHTML = item1[0]["title"]
        // document.write(item1[0]["title"])
      });
  </script>
</body>

</html>
